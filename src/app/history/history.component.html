<div class="history-container">
  <span [style.color]="'blue'" [style.cursor]="'pointer'" [routerLink]="'/'"
    >< Back</span
  ><br />
  <div [style.margin.px]="'10'">
    <span>Общий расход: </span>
    <span [style.color]="'#ff6f61'">{{ totalAmount }}€</span>
  </div>
  <button
    class="history-expand-filter-button"
    [ngClass]="{ 'history-expand-filter-button-active': expandFilters }"
    (click)="toggleExpandFilters()"
  >
    <i class="fas fa-filter"></i>
  </button>
  <div class="history-expand-filter-container" *ngIf="expandFilters">
    <div class="history-expand-filter">
      <div class="history-expand-filter-date">
        <span>Период:</span>
        <select (change)="applyFilters()" [(ngModel)]="filterDate">
          <option value="">Показать все</option>
          <option value="today">Сегодня</option>
          <option value="thisWeek">Эта неделя</option>
          <option value="thisMonth">Этот месяц</option>
        </select>
      </div>
      <div class="history-expand-filter-category">
        <span>Категория:</span>
        <br>
        <ng-container *ngFor="let category of categories">
          <input
            type="checkbox"
            (change)="applyFilters()"
            [value]="category.id"
            [id]="category.id"
            [checked]="filterCategories[category.id]"
            [(ngModel)]="filterCategories[category.id]"
          />
          <label for="category.name">{{ category.name }}</label>
        </ng-container>
      </div>
    </div>
    <div class="history-expand-filter-buttons">
      <button (click)="clearFilters()">Clear filters</button>
      <button (click)="applyFilters()">Apply filters</button>
    </div>
  </div>
  <hr [style.background]="'#f8d7da'" [style.height]="'2px'" />
  <span *ngFor="let item of expenses; let i = index">
    <span
      [style.background]="'#f8d7da'"
      [style.width]="'100%'"
      [style.display]="'block'"
      *ngIf="item.showDateTitle"
      ><span>{{ item.date | date : "dd-MM-YYYY" }} - </span
      ><span [style.font-weight]="'600'"
        >{{ getTotalAmountPerDay(item.date) }}€</span
      ></span
    >
    <div class="history-item">
      <br />Цена:
      <span [style.color]="'#ff6f61'">{{ item.amount }}€</span>
      <br /><br />
      <div>
        Category:
        <span
          class="app-link"
          (click)="showCategoryDetails(item.category)"
          >{{ getCategoryNameByIdFunc(item.category) }}</span
        >
      </div>
      Date: {{ item.date | date : "HH:mm" }} <br /><br />
      <span
        [style.color]="'grey'"
        [style.cursor]="'pointer'"
        (click)="onDelete(i)"
        >Delete</span
      >
      <span
        *ngIf="!item.isDeletedFromBalance && getCategoryByIdFunc(item.category).includeInBalance"
        [style.color]="'grey'"
        [style.cursor]="'pointer'"
        (click)="onDeleteFromBalance(i)"
      >
       | Delete from balance</span
      >
    </div>
    <hr [style.background]="'#f8d7da'" [style.height]="'2px'" />
  </span>
</div>
