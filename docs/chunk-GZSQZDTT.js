import{$ as P,A as b,B as f,C as s,E as p,F as a,G as c,H as T,I as S,J as E,K as o,L as Y,M as l,S as v,T as _,a as C,aa as k,b as H,ba as N,ca as R,ja as O,k as d,ka as X,la as m,m as D,n as h,q as w,r as I,v as i,w as M}from"./chunk-C4AJC3S4.js";function F(n,e){if(n&1&&(p(0,"span"),o(1),v(2,"date"),a()),n&2){let t=E().$implicit;s("background","#f8d7da")("width","100%")("display","block"),i(),Y(_(2,7,t.date,"dd-MM-YYYY"))}}function L(n,e){if(n&1){let t=T();p(0,"span"),b(1,F,3,10,"span",3),c(2,"br"),o(3),c(4,"br"),o(5),c(6,"br"),o(7),v(8,"date"),c(9,"br")(10,"br"),p(11,"span",4),S("click",function(){let x=w(t).index,u=E();return I(u.onDelete(x))}),o(12,"DELETE"),a(),c(13,"hr"),a()}if(n&2){let t=e.$implicit;i(),f("ngIf",t.showDateTitle),i(2),l(" Amount: ",t.amount,"\u20AC "),i(2),l(" Category: ",t.category," "),i(2),l(" Date: ",_(8,12,t.date,"dd-MM-YYYY HH:mm")," "),i(4),s("color","orange")("cursor","pointer"),i(2),s("background","#f8d7da")("height","2px")}}var g=class n{constructor(e){this.router=e}expenses=[];totalAmount=0;temporaryDate=0;ngOnInit(){this.expenses=JSON.parse(localStorage.getItem("expenses")||"[]").map(e=>H(C({},e),{showDateTitle:this.isDatePanelVisible(e.date)})),this.sumValues()}onDelete(e){if(confirm(`Press a button!
Either OK or Cancel.`)==!0){let t=Number(localStorage.getItem("balance"))||0;t&&localStorage.setItem("balance",(t+this.expenses[e].amount).toString()),this.expenses.splice(e,1),localStorage.setItem("expenses",JSON.stringify(this.expenses)),this.sumValues()}}onSwipeRight(){this.router.navigate(["/"])}isDatePanelVisible(e){return this.temporaryDate===0?(this.temporaryDate=e,!0):new Date(this.temporaryDate).toDateString()===new Date(e).toDateString()?!1:(this.temporaryDate=e,!0)}touchStartX=0;touchStartY=0;touchEndX=0;touchEndY=0;onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.touchEndY=e.changedTouches[0].screenY,this.handleSwipeGesture()}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY;Math.abs(e)>Math.abs(t)&&(e>50?this.onSwipeRight():e<-50&&this.onSwipeLeft())}onSwipeLeft(){console.log("Swiped left")}sumValues(){this.totalAmount=this.expenses.reduce((e,t)=>{let r=e+t.amount;return Math.round(r*100)/100},0)}static \u0275fac=function(t){return new(t||n)(M(O))};static \u0275cmp=D({type:n,selectors:[["app-history"]],hostBindings:function(t,r){t&1&&S("touchstart",function(u){return r.onTouchStart(u)})("touchend",function(u){return r.onTouchEnd(u)})},decls:11,vars:15,consts:[[1,"history-container"],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"background","width","display",4,"ngIf"],[3,"click"]],template:function(t,r){t&1&&(p(0,"div",0)(1,"span",1),o(2,"< Back"),a(),c(3,"br"),p(4,"div")(5,"span"),o(6,"\u041E\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043E\u0434: "),a(),p(7,"span"),o(8),a()(),c(9,"hr"),b(10,L,14,15,"span",2),a()),t&2&&(i(),s("color","blue")("cursor","pointer"),f("routerLink","/"),i(3),s("margin","10","px"),i(3),s("color","red"),i(),l("",r.totalAmount," $"),i(),s("background","#f8d7da")("height","2px"),i(),f("ngForOf",r.expenses))},dependencies:[X,P,k,N],styles:[".history-container[_ngcontent-%COMP%]{overflow-y:scroll}"]})};var j=[{path:"",component:g}],y=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=d({imports:[m.forChild(j),m]})};var B=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=d({imports:[m,y,R]})};export{B as HistoryModule};
