import{$ as P,A as b,B as f,C as s,E as c,F as a,G as p,H as I,I as E,J as S,K as o,L as Y,M as m,S as v,T as _,a as C,aa as k,b as H,ba as R,ca as N,ja as O,k as d,ka as X,la as l,m as D,n as h,q as w,r as M,v as i,w as T}from"./chunk-C4AJC3S4.js";function F(n,e){if(n&1&&(c(0,"span"),o(1),v(2,"date"),a()),n&2){let t=S().$implicit;s("background","#f8d7da")("width","100%")("display","block"),i(),Y(_(2,7,t.date,"dd-MM-YYYY"))}}function L(n,e){if(n&1){let t=I();c(0,"span"),b(1,F,3,10,"span",3),p(2,"br"),o(3),p(4,"br"),o(5),p(6,"br"),o(7),v(8,"date"),p(9,"br")(10,"br"),c(11,"span",4),E("click",function(){let x=w(t).index,u=S();return M(u.onDelete(x))}),o(12,"DELETE"),a(),p(13,"hr"),a()}if(n&2){let t=e.$implicit;i(),f("ngIf",t.showDateTitle),i(2),m(" Amount: ",t.amount,"\u20AC "),i(2),m(" Category: ",t.category," "),i(2),m(" Date: ",_(8,12,t.date,"dd-MM-YYYY HH:mm")," "),i(4),s("color","orange")("cursor","pointer"),i(2),s("background","#f8d7da")("height","2px")}}var y=class n{constructor(e){this.router=e}expenses=[];totalAmount=0;temporaryDate=0;ngOnInit(){this.expenses=JSON.parse(localStorage.getItem("expenses")||"[]").map(e=>H(C({},e),{showDateTitle:this.isDatePanelVisible(e.date)})),this.sumValues()}onDelete(e){confirm(`Press a button!
Either OK or Cancel.`)==!0&&(this.expenses.splice(e,1),localStorage.setItem("expenses",JSON.stringify(this.expenses)),this.sumValues())}onSwipeRight(){this.router.navigate(["/"])}isDatePanelVisible(e){return this.temporaryDate===0?(this.temporaryDate=e,!0):new Date(this.temporaryDate).toDateString()===new Date(e).toDateString()?!1:(this.temporaryDate=e,!0)}touchStartX=0;touchStartY=0;touchEndX=0;touchEndY=0;onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.touchEndY=e.changedTouches[0].screenY,this.handleSwipeGesture()}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY;Math.abs(e)>Math.abs(t)&&(e>50?this.onSwipeRight():e<-50&&this.onSwipeLeft())}onSwipeLeft(){console.log("Swiped left")}sumValues(){this.totalAmount=this.expenses.reduce((e,t)=>{let r=e+t.amount;return Math.round(r*100)/100},0)}static \u0275fac=function(t){return new(t||n)(T(O))};static \u0275cmp=D({type:n,selectors:[["app-history"]],hostBindings:function(t,r){t&1&&E("touchstart",function(u){return r.onTouchStart(u)})("touchend",function(u){return r.onTouchEnd(u)})},decls:11,vars:15,consts:[[1,"history-container"],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"background","width","display",4,"ngIf"],[3,"click"]],template:function(t,r){t&1&&(c(0,"div",0)(1,"span",1),o(2,"< Back"),a(),p(3,"br"),c(4,"div")(5,"span"),o(6,"\u041E\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043E\u0434: "),a(),c(7,"span"),o(8),a()(),p(9,"hr"),b(10,L,14,15,"span",2),a()),t&2&&(i(),s("color","blue")("cursor","pointer"),f("routerLink","/"),i(3),s("margin","10","px"),i(3),s("color","red"),i(),m("",r.totalAmount," $"),i(),s("background","#f8d7da")("height","2px"),i(),f("ngForOf",r.expenses))},dependencies:[X,P,k,R],styles:[".history-container[_ngcontent-%COMP%]{overflow-y:scroll}"]})};var j=[{path:"",component:y}],g=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=d({imports:[l.forChild(j),l]})};var B=class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=h({type:n});static \u0275inj=d({imports:[l,g,N]})};export{B as HistoryModule};
