import{$ as P,A as f,B as r,D as p,E as a,F as s,G as w,H,I as h,J as o,K as S,L as l,R as b,S as v,_ as k,a as D,aa as N,b as C,ba as R,ia as O,j as u,ja as T,ka as c,l as E,m as d,p as _,q as I,u as n,v as M,z as g}from"./chunk-2I7ZVQFY.js";function A(i,t){if(i&1&&(p(0,"span"),o(1),b(2,"date"),a()),i&2){let e=h().$implicit;r("background","#f8d7da")("width","100%")("display","block"),n(),S(v(2,7,e.date,"dd-MM-YYYY"))}}function L(i,t){if(i&1){let e=w();p(0,"span"),g(1,A,3,10,"span",3),s(2,"br"),o(3),s(4,"br"),o(5),s(6,"br"),o(7),b(8,"date"),s(9,"br")(10,"br"),p(11,"span",4),H("click",function(){let F=_(e).index,j=h();return I(j.onDelete(F))}),o(12,"DELETE"),a(),s(13,"hr"),a()}if(i&2){let e=t.$implicit;n(),f("ngIf",e.showDateTitle),n(2),l(" Amount: ",e.amount,"\u20AC "),n(2),l(" Category: ",e.category," "),n(2),l(" Date: ",v(8,12,e.date,"dd-MM-YYYY HH:mm")," "),n(4),r("color","orange")("cursor","pointer"),n(2),r("background","#f8d7da")("height","2px")}}var y=class i{constructor(t){this.router=t}expenses=[];totalAmount=0;temporaryDate=0;ngOnInit(){this.expenses=JSON.parse(localStorage.getItem("expenses")||"[]").map(t=>C(D({},t),{showDateTitle:this.isDatePanelVisible(t.date)})),this.sumValues()}onDelete(t){confirm(`Press a button!
Either OK or Cancel.`)==!0&&(this.expenses.splice(t,1),localStorage.setItem("expenses",JSON.stringify(this.expenses)),this.sumValues())}onSwipeRight(){this.router.navigate(["/"])}isDatePanelVisible(t){return this.temporaryDate===0?(this.temporaryDate=t,!0):new Date(this.temporaryDate).toDateString()===new Date(t).toDateString()?!1:(this.temporaryDate=t,!0)}sumValues(){this.totalAmount=this.expenses.reduce((t,e)=>{let m=t+e.amount;return Math.round(m*100)/100},0)}static \u0275fac=function(e){return new(e||i)(M(O))};static \u0275cmp=E({type:i,selectors:[["app-history"]],decls:11,vars:15,consts:[[1,"history-container"],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"background","width","display",4,"ngIf"],[3,"click"]],template:function(e,m){e&1&&(p(0,"div",0)(1,"span",1),o(2,"< Back"),a(),s(3,"br"),p(4,"div")(5,"span"),o(6,"\u041E\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043E\u0434: "),a(),p(7,"span"),o(8),a()(),s(9,"hr"),g(10,L,14,15,"span",2),a()),e&2&&(n(),r("color","blue")("cursor","pointer"),f("routerLink","/"),n(3),r("margin","10","px"),n(3),r("color","red"),n(),l("",m.totalAmount," $"),n(),r("background","#f8d7da")("height","2px"),n(),f("ngForOf",m.expenses))},dependencies:[T,k,P,N]})};var B=[{path:"",component:y}],x=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=d({type:i});static \u0275inj=u({imports:[c.forChild(B),c]})};var Y=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=d({type:i});static \u0275inj=u({imports:[c,x,R]})};export{Y as HistoryModule};
