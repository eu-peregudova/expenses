import{$ as P,A as S,B as y,C as s,E as a,F as p,G as c,H as I,I as g,J as _,K as r,L as Y,M as m,S as E,T as v,a as w,aa as k,b as C,ba as R,ca as N,ja as O,k as h,ka as X,la as l,m as H,n as f,q as D,r as T,v as n,w as M}from"./chunk-C4AJC3S4.js";function F(i,e){if(i&1&&(a(0,"span"),r(1),E(2,"date"),p()),i&2){let t=_().$implicit;s("background","#f8d7da")("width","100%")("display","block"),n(),Y(v(2,7,t.date,"dd-MM-YYYY"))}}function L(i,e){if(i&1){let t=I();a(0,"span"),S(1,F,3,10,"span",3),c(2,"br"),r(3),c(4,"br"),r(5),c(6,"br"),r(7),E(8,"date"),c(9,"br")(10,"br"),a(11,"span",4),g("click",function(){let d=D(t).index,u=_();return T(u.onDelete(d))}),r(12,"DELETE"),p(),c(13,"hr"),p()}if(i&2){let t=e.$implicit;n(),y("ngIf",t.showDateTitle),n(2),m(" Amount: ",t.amount,"\u20AC "),n(2),m(" Category: ",t.category," "),n(2),m(" Date: ",v(8,12,t.date,"dd-MM-YYYY HH:mm")," "),n(4),s("color","orange")("cursor","pointer"),n(2),s("background","#f8d7da")("height","2px")}}var x=class i{constructor(e){this.router=e}expenses=[];totalAmount=0;temporaryDate=0;ngOnInit(){this.expenses=JSON.parse(localStorage.getItem("expenses")||"[]").map(e=>C(w({},e),{showDateTitle:this.isDatePanelVisible(e.date)})),this.sumValues()}onDelete(e){confirm(`Press a button!
Either OK or Cancel.`)==!0&&(this.expenses.splice(e,1),localStorage.setItem("expenses",JSON.stringify(this.expenses)),this.sumValues())}onSwipeRight(){this.router.navigate(["/"])}isDatePanelVisible(e){return this.temporaryDate===0?(this.temporaryDate=e,!0):new Date(this.temporaryDate).toDateString()===new Date(e).toDateString()?!1:(this.temporaryDate=e,!0)}touchStartX=0;touchStartY=0;touchEndX=0;touchEndY=0;onTouchStart(e){this.touchStartX=e.changedTouches[0].screenX,this.touchStartY=e.changedTouches[0].screenY}onTouchEnd(e){this.touchEndX=e.changedTouches[0].screenX,this.touchEndY=e.changedTouches[0].screenY,this.handleSwipeGesture()}handleSwipeGesture(){let e=this.touchEndX-this.touchStartX,t=this.touchEndY-this.touchStartY;Math.abs(e)>Math.abs(t)&&(e>50?this.onSwipeRight():e<-50&&this.onSwipeLeft())}onSwipeLeft(){console.log("Swiped left")}sumValues(){this.totalAmount=this.expenses.reduce((e,t)=>{let o=e+t.amount;return Math.round(o*100)/100},0)}static \u0275fac=function(t){return new(t||i)(M(O))};static \u0275cmp=H({type:i,selectors:[["app-history"]],hostBindings:function(t,o){t&1&&g("touchstart",function(u){return o.onTouchStart(u)})("touchend",function(u){return o.onTouchEnd(u)})},decls:11,vars:15,consts:[[1,"history-container",3,"swiperight"],[3,"routerLink"],[4,"ngFor","ngForOf"],[3,"background","width","display",4,"ngIf"],[3,"click"]],template:function(t,o){t&1&&(a(0,"div",0),g("swiperight",function(){return o.onSwipeRight()}),a(1,"span",1),r(2,"< Back"),p(),c(3,"br"),a(4,"div")(5,"span"),r(6,"\u041E\u0431\u0449\u0438\u0439 \u0440\u0430\u0441\u0445\u043E\u0434: "),p(),a(7,"span"),r(8),p()(),c(9,"hr"),S(10,L,14,15,"span",2),p()),t&2&&(n(),s("color","blue")("cursor","pointer"),y("routerLink","/"),n(3),s("margin","10","px"),n(3),s("color","red"),n(),m("",o.totalAmount," $"),n(),s("background","#f8d7da")("height","2px"),n(),y("ngForOf",o.expenses))},dependencies:[X,P,k,R],styles:[".history-container[_ngcontent-%COMP%]{overflow-y:scroll}"]})};var j=[{path:"",component:x}],b=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=f({type:i});static \u0275inj=h({imports:[l.forChild(j),l]})};var B=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=f({type:i});static \u0275inj=h({imports:[l,b,N]})};export{B as HistoryModule};
